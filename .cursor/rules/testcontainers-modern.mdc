---
alwaysApply: true
autoFix: true
version: "2.0.0"
---

# TESTCONTAINERS

## PATTERN
```java
@Testcontainers
public abstract class BaseIntegrationTest {
    @Container
    static PostgreSQLContainer<?> postgres = new PostgreSQLContainer<>("postgres:16-alpine")
        .withDatabaseName("testdb").withReuse(true);
    
    @DynamicPropertySource
    static void configureProperties(DynamicPropertyRegistry registry) {
        registry.add("spring.datasource.url", postgres::getJdbcUrl);
    }
}

@SpringBootTest @Transactional
class MyTest extends BaseIntegrationTest { }
```

## PERFORMANCE
- testcontainers.reuse.enable=true (2-5s startup)
- @Transactional for auto-rollback
- Singleton container (NOT per test)

## CRITICAL ANTIPATTERNS
1. New container per test → use singleton
2. @DirtiesContext everywhere → very slow
3. No reuse enabled → slow
