/* ==================== MOBILE-FIRST RESPONSIVE STYLES ==================== */

/* Based on: @mobile-first-best-practices */

/* ==================== Global Touch Targets ==================== */

/* WCAG 2.1 AAA: 44x44px minimum, 48x48px recommended */

/* Apply minimum touch target size to all interactive elements */
button,
input,
select {
    min-width: var(--app-mobile-button-size);
    min-height: var(--app-mobile-button-size);
}

/* ==================== MenuButton Component ==================== */

/* Menu button - compact button with three dots (used in deck header) */
.menu-button {
    min-width: var(--app-mobile-button-size);
    min-height: var(--app-mobile-button-size);
    padding: 0;
}

.menu-button vaadin-icon {
    margin: 0;
}

/* ==================== DeckView - Detail Header ==================== */

/* Desktop: [← Back] [Title] [Stats] - left aligned */

/* Mobile: [← Back] [Title] [Stats] + [⋮ Menu: Practice, Edit, Reset, Delete] */

@media (max-width: 767px) {
    /* Hide desktop actions section completely */
    .deck-view__actions {
        display: none;
    }
    
    /* Mobile: Title and stats - compact */
    .deck-view__title {
        margin: 0;
        font-size: var(--lumo-font-size-m);
    }
    
    .deck-view__stats {
        margin: 0;
        font-size: var(--lumo-font-size-xs);
    }
    
    /* Mobile: center section with title + stats + menu - left aligned */
    .deck-view__header .deck-header-center {
        gap: var(--lumo-space-xs);
    }
    
    /* Mobile toolbar: only search + filter */
    .deck-toolbar {
        gap: var(--lumo-space-s);
    }
    
    .deck-search-field {
        flex: 1 1 auto;
        min-width: 0;
    }
    
    .deck-filter-combobox {
        flex: 0 0 120px;
    }
    
    /* Mobile actions: only Add button visible */
    .deck-view__actions .desktop-only {
        display: none;
    }
    
    .deck-view__actions.mobile-actions {
        display: flex;
        justify-content: center;
    }
}

/* Base layout managed via Java code */

/* Mobile: Compact filter and practice button */

@media (max-width: 767px) {
    /* Compact filter on mobile */
    .deck-filter-combobox {
        flex-shrink: 1;
        min-width: 100px;
        max-width: 140px;
    }
    
    /* Ensure mobile-only container doesn't overflow */
    .deck-view__actions .mobile-only {
        justify-content: center;
        width: 100%;
        max-width: 100%;
        padding: 0;
        gap: var(--lumo-space-xs);
    }
}

/* Tablet and up: Larger fonts */

@media (min-width: 768px) {
    .deck-view__title {
        font-size: var(--lumo-font-size-xxl);
    }
    
    .deck-view__stats {
        font-size: var(--lumo-font-size-m);
    }
}

/* ==================== Flashcard Cards List ==================== */

/* Flashcard card styling */
.flashcard-card {
    position: relative;
    width: 100%;
    max-width: 100%;
    margin-bottom: var(--lumo-space-s);
    border: 1px solid var(--lumo-contrast-10pct);
    border-radius: var(--lumo-border-radius-m);
    background: var(--lumo-base-color);
    transition: all 0.2s ease; /* Smooth transitions for all properties */
    cursor: pointer; /* Double-click to edit */
    box-sizing: border-box; /* Include padding/border in width calculation */
    box-shadow: var(--lumo-box-shadow-s);
    overflow-x: hidden; /* Prevent horizontal scroll */
    word-wrap: break-word; /* Break long words to prevent overflow */
}

/* Known flashcard - green left border */
.flashcard-card--known {
    border-left: 4px solid var(--lumo-success-color);
}

/* Unknown flashcard - light blue left border (like edit icon) */
.flashcard-card--unknown {
    border-left: 4px solid var(--lumo-primary-color-50pct);
}


.flashcard-card:hover {
    border-color: var(--lumo-primary-color-30pct); /* Subtle border highlight */
    background: var(--lumo-contrast-5pct); /* Subtle background highlight */
    box-shadow: var(--lumo-box-shadow-m);
}

.flashcard-card:active {
    background: var(--lumo-primary-color-10pct);
    transform: scale(0.98); /* Subtle press effect */
}

.flashcard-card:focus {
    outline: 2px solid var(--lumo-primary-color);
    outline-offset: 2px;
}

/* Front text styling */
.flashcard-front {
    flex-grow: 1;
    color: var(--lumo-body-text-color);
    font-size: var(--lumo-font-size-m);
    font-weight: var(--lumo-font-weight-medium);
    cursor: text; /* Text is selectable, not clickable */
    user-select: text; /* Allow text selection */
}

/* Example text styling */
.flashcard-example {
    margin-top: var(--lumo-space-xs);
    color: var(--lumo-secondary-text-color);
    font-size: var(--lumo-font-size-s);
    cursor: text; /* Text is selectable, not clickable */
    font-style: italic;
    user-select: text; /* Allow text selection */
}

/* Known indicator (checkmark) - hidden, replaced with border */
.flashcard-known-indicator {
    display: none;
}

/* Desktop action buttons */
.flashcard-desktop-actions {
    display: flex;
    align-items: center;
    gap: var(--lumo-space-xs);
}

/* Action buttons styling */
.flashcard-desktop-actions button {
    min-width: 44px;
    min-height: 44px;
}

/* Mobile action buttons - same as desktop but with mobile-specific styling */

@media (max-width: 767px) {
    .flashcard-desktop-actions button {
        min-width: 44px;
        min-height: 44px;
        padding: var(--lumo-space-xs);
    }
}

/* Mobile: Compact cards */

@media (max-width: 767px) {
    .flashcard-card {
        margin-bottom: var(--lumo-space-xs);
    }
    
    .flashcard-front {
        font-size: var(--lumo-font-size-s);
    }
    
    .flashcard-example {
        font-size: var(--lumo-font-size-xs);
    }
}

/* ==================== Search Controls - Search & Filter ==================== */

/* Search controls container - ensure proper padding */
.deck-search-controls-container {
    margin: 0;
}

/* Search field with hover effect and responsive width */
.deck-search-field {
    width: 100%;
    max-width: 600px;
    margin: 0;
    transition: box-shadow var(--lumo-transition-duration) ease, transform var(--lumo-transition-duration) ease;
}


/* Flex properties for search controls - desktop: search grows, filter fixed */
.search-field-flex {
    flex: 1;
}

.filter-combobox-flex {
    flex: 0 0 auto;
}

/* Filter combobox with hover effect - responsive width */
.deck-filter-combobox {
    width: var(--app-filter-width);
    max-width: var(--app-filter-width);
    margin: 0;
    transition: box-shadow var(--lumo-transition-duration) ease, transform var(--lumo-transition-duration) ease;
}

/* Mobile: equal width for search and filter (50/50) */

@media (max-width: 767px) {
    .deck-search-controls-container {
        padding: 0 var(--lumo-space-s);
    }
    
    /* Both search and filter take equal space */
    .search-field-flex,
    .filter-combobox-flex {
        flex: 1;
    }
    
    .deck-filter-combobox {
        width: auto;
        max-width: none;
    }
}

/* ==================== DeckToolbar - Search & Add ==================== */

/* Mobile: Horizontal layout with proper sizing */
.deck-toolbar {
    width: 100%;
    max-width: var(--app-card-max, 700px); /* Same as deck-card */
    margin: 0 auto; /* Center the toolbar */
    box-sizing: border-box; /* Include padding in width calculation */
}

.deck-toolbar > * {
    flex-direction: row;
    gap: var(--lumo-space-s);
    align-items: center;
    justify-content: space-between; /* Search on left, button on right */
    width: 100%;
    box-sizing: border-box;
}

.deck-toolbar__search {
    flex: 1;
    min-width: 0; /* Allow shrinking */
    transition: box-shadow var(--lumo-transition-duration) ease, transform var(--lumo-transition-duration) ease;
}

.deck-toolbar__add-button {
    flex-shrink: 0; /* Prevent button from shrinking */
    white-space: nowrap; /* Prevent text wrapping */
}

/* Ensure search field doesn't overflow */
.deck-toolbar__search vaadin-text-field {
    width: 100%;
    max-width: 100%;
}

/* Ensure button text fits */
.deck-toolbar__add-button vaadin-button {
    width: 100%;
    max-width: 100%;
    font-size: var(--lumo-font-size-s); /* Smaller font on mobile */
}

/* Mobile: Hide button text, show only icon */

@media (max-width: 767px) {
    /* Add deck button - icon only */
    .deck-toolbar__add-button {
        position: relative;
        width: var(--app-mobile-button-size);
        height: var(--app-mobile-button-size);
        min-width: var(--app-mobile-button-size);
        max-width: var(--app-mobile-button-size);
        padding: 0;
    }
    
    /* Hide text via ::part(label) */
    .deck-toolbar__add-button::part(label) {
        display: none;
    }
    
    /* Show icon over text */
    .deck-toolbar__add-button vaadin-icon {
        position: absolute;
        top: 50%;
        left: 50%;
        margin: 0;
        font-size: var(--lumo-icon-size-m);
        transform: translate(-50%, -50%);
    }
}

/* ==================== DeckGrid - Search Controls & Grid Actions ==================== */

/* Flashcard actions menu - compact menu in table - styling via MenuButton */

/* Tablet and up: More spacing and larger text */

@media (min-width: 768px) {
    .deck-toolbar > * {
        gap: var(--lumo-space-m);
    }
    
    .deck-toolbar__add-button vaadin-button {
        min-width: auto;
        max-width: none;
        padding: var(--lumo-space-xs) var(--lumo-space-m);
        font-size: var(--lumo-font-size-m); /* Normal font size on larger screens */
    }
    
    .deck-toolbar__add-button vaadin-button vaadin-icon {
        margin-right: var(--lumo-space-xs);
    }
}

/* ==================== StatsView - Responsive Grid ==================== */

/* Mobile: 1 column, stacked */
.stats-today-grid,
.stats-overall-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--lumo-space-s);
    width: 100%;
}

.stats-card {
    width: 100%;
    min-width: unset;
}

/* Small mobile: 2 columns */

@media (min-width: 480px) {
    .stats-today-grid,
    .stats-overall-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

/* Tablet: 4 columns */

@media (min-width: 768px) {
    .stats-today-grid,
    .stats-overall-grid {
        grid-template-columns: repeat(4, 1fr);
        gap: var(--lumo-space-m);
    }
}

/* Deck stats cards - mobile optimization */
.deck-stats-card {
    width: 100%;
    min-width: unset;
}

.stats-current-deck__container {
    min-height: unset;
    padding: var(--lumo-space-m);
}

/* Deck stats grid - responsive */
.deck-stats-card__grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--lumo-space-s);
}

@media (min-width: 480px) {
    .deck-stats-card__grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (min-width: 768px) {
    .deck-stats-card__grid {
        grid-template-columns: repeat(4, 1fr);
    }
}

/* ==================== AdminNewsView - Responsive Toolbar ==================== */

/* Mobile: Stack search and button */
.admin-content-toolbar {
    width: 100%;
}

.admin-content-toolbar > * {
    flex-direction: column;
    gap: var(--lumo-space-s);
}

.admin-content-toolbar vaadin-text-field {
    width: 100%;
}

.admin-content-toolbar button {
    width: 100%;
}

/* Tablet and up: Horizontal layout */

@media (min-width: 768px) {
    .admin-content-toolbar > * {
        flex-direction: row;
        gap: var(--lumo-space-m);
    }
    
    .admin-content-toolbar vaadin-text-field {
        flex: 1;
        width: auto;
    }
    
    .admin-content-toolbar button {
        width: auto;
    }
}

/* News cards - prevent overflow */
.news-card {
    width: 100%;
    max-width: 100%;
    padding: var(--lumo-space-m);
    box-sizing: border-box;
}

.news-card__content {
    word-wrap: break-word;
    overflow-wrap: break-word;
}

/* News card actions - mobile stack */
.news-card__actions {
    display: flex;
    flex-direction: column;
    gap: var(--lumo-space-s);
    width: 100%;
}

.news-card__actions button {
    width: 100%;
}

@media (min-width: 768px) {
    .news-card {
        max-width: var(--app-card-max, 700px);
    }
    
    .news-card__actions {
        flex-direction: row;
        width: auto;
    }
    
    .news-card__actions button {
        width: auto;
    }
}

/* ==================== DecksView - Card Grid ==================== */

/* Deck cards container */
.decks-list {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--lumo-space-m);
    width: 100%;
    max-width: var(--app-card-max, 700px); /* Same as deck-card */
    margin: 0 auto; /* Center the cards */
}

/* ==================== Deck Card Mobile Optimization ==================== */

/* Mobile: Compact deck card layout */

@media (max-width: 767px) {
    .deck-card {
        padding: var(--lumo-space-s); /* Smaller padding on mobile */
    }
    
    .deck-card__title {
        font-size: var(--lumo-font-size-m); /* Smaller title on mobile */
    }
    
    .deck-card__description {
        margin: var(--lumo-space-xs) 0; /* Smaller margins */
        font-size: var(--lumo-font-size-xs); /* Smaller description */
    }
    
    .deck-card__progress-label,
    .deck-card__progress-text,
    .deck-card__progress-details {
        font-size: var(--lumo-font-size-xs); /* Smaller progress text */
    }
    
    /* Very small screens: compact progress */

    @media (max-width: 480px) {
        .deck-card__progress-details {
            display: none; /* Hide detailed progress on very small screens */
        }
        
        .deck-card__progress-text {
            font-size: var(--lumo-font-size-xs);
        }
    }
    
    /* Practice button - icon only on mobile */
    .deck-card__practice-button {
        margin-top: var(--lumo-space-xs);
    }
    
    .deck-card__practice-button vaadin-button {
        position: relative;
        width: var(--app-mobile-practice-button-size);
        height: var(--app-mobile-practice-button-size);
        min-width: var(--app-mobile-practice-button-size);
        max-width: var(--app-mobile-practice-button-size);
        padding: 0;
    }

    /* Hide text via ::part(label) */
    .deck-card__practice-button vaadin-button::part(label) {
        display: none;
    }
    
    .deck-card__practice-button vaadin-button vaadin-icon {
        position: absolute;
        top: 50%;
        left: 50%;
        margin: 0;
        font-size: var(--lumo-icon-size-m);
        transform: translate(-50%, -50%);
    }
}

/* Tablet and up: Full button with text and responsive grid */

@media (min-width: 768px) {
    .deck-card__practice-button vaadin-button {
        width: auto;
        height: auto;
        min-width: auto;
        max-width: none;
        padding: var(--lumo-space-xs) var(--lumo-space-m);
        font-size: var(--lumo-font-size-s);
    }
    
    .deck-card__practice-button vaadin-button vaadin-icon {
        margin-right: var(--lumo-space-xs);
    }
    
    .decks-list {
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    }
}

@media (min-width: 1024px) {
    .decks-list {
        grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
    }
}

/* Deck card - prevent overflow */
.deck-card {
    width: 100%;
    max-width: 100%;
    margin: 0; /* Remove any margins that could cause overflow */
    box-sizing: border-box;
}

/* ==================== Pagination Mobile Fixes ==================== */

/* Mobile pagination - fix alignment and text overflow */

@media (max-width: 767px) {
    /* Pagination info text - responsive display */
    .deck-pagination-info {
        position: relative;
        padding: 0 var(--lumo-space-s);
        font-size: var(--lumo-font-size-xs);
        line-height: 1.2;
        text-align: center;
        word-break: break-word;
        overflow-wrap: break-word;
    }

    /* Show only page numbers on mobile by hiding the original text and showing page info */
    .deck-pagination-info::after {
        content: attr(data-page-info);
        position: absolute;
        top: 50%;
        left: 50%;
        display: none;
        min-width: 60px;
        padding: var(--lumo-space-xs) var(--lumo-space-s);
        border: 1px solid var(--lumo-contrast-20pct);
        border-radius: var(--lumo-border-radius-m);
        background: var(--lumo-contrast-5pct);
        font-size: var(--lumo-font-size-s);
        text-align: center;
        transform: translate(-50%, -50%);
    }

    /* On tablet screens, show compact version */

    @media (max-width: 768px) and (min-width: 481px) {
        .deck-pagination-info {
            padding: var(--lumo-space-xs);
            border: 1px solid var(--lumo-contrast-10pct);
            border-radius: var(--lumo-border-radius-s);
            background: var(--lumo-contrast-5pct);
            font-size: var(--lumo-font-size-xs);
        }
    }

    /* On medium mobile screens, show compact version */

    @media (max-width: 600px) and (min-width: 481px) {
        .deck-pagination-info {
            max-width: 200px;
            padding: var(--lumo-space-xs);
            border: 1px solid var(--lumo-contrast-10pct);
            border-radius: var(--lumo-border-radius-s);
            background: var(--lumo-contrast-5pct);
            font-size: var(--lumo-font-size-xs);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
    }

    /* On very small screens, hide original text and show only page numbers */

    @media (max-width: 480px) {
        .deck-pagination-info {
            padding: 0;
            border: none;
            background: transparent;
            color: var(--lumo-contrast-0pct);
            font-size: 0;
            line-height: 0;
        }
        
        .deck-pagination-info::after {
            display: block;
            color: var(--lumo-body-text-color);
            font-size: var(--lumo-font-size-s);
            line-height: normal;
        }
    }
    
    /* Pagination controls - better alignment */
    .deck-pagination-top,
    .deck-pagination-bottom {
        flex-wrap: nowrap;
        padding: var(--lumo-space-xs) var(--lumo-space-s);
        gap: var(--lumo-space-xs);
    }
    
    /* Page info text - fix vertical alignment */
    .pagination-page-info {
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 44px; /* Match button height for proper alignment */
        margin: 0 var(--lumo-space-xs);
        font-size: var(--lumo-font-size-s);
        font-weight: var(--lumo-font-weight-medium);
        white-space: nowrap;
    }
    
    /* Pagination buttons - consistent sizing */
    .deck-pagination-top vaadin-button,
    .deck-pagination-bottom vaadin-button {
        flex-shrink: 0;
        min-width: 44px;
        min-height: 44px;
        padding: var(--lumo-space-xs);
        font-size: var(--lumo-font-size-xs);
    }
    
    /* Hide button text on very small screens, show only icons */

    @media (max-width: 480px) {
        .deck-pagination-top vaadin-button::part(label),
        .deck-pagination-bottom vaadin-button::part(label) {
            display: none;
        }
        
        .deck-pagination-top vaadin-button,
        .deck-pagination-bottom vaadin-button {
            width: 44px;
            height: 44px;
            padding: 0;
        }
        
        .deck-pagination-top vaadin-button vaadin-icon,
        .deck-pagination-bottom vaadin-button vaadin-icon {
            margin: 0;
        }
        
        /* Even more compact pagination info on very small screens */
        .deck-pagination-info {
            padding: 0 var(--lumo-space-xs);
            font-size: var(--lumo-font-size-xs);
        }
    }
}

/* Tablet and desktop: restore full pagination text */

@media (min-width: 768px) {
    .deck-pagination-info {
        padding: 0 var(--lumo-space-m);
        font-size: var(--lumo-font-size-s);
        text-align: center;
    }
    
    .pagination-page-info {
        margin: 0 var(--lumo-space-m);
        font-size: var(--lumo-font-size-m);
    }
    
    /* Show button text on larger screens */
    .deck-pagination-top vaadin-button::part(label),
    .deck-pagination-bottom vaadin-button::part(label) {
        display: block;
    }
    
    .deck-pagination-top vaadin-button,
    .deck-pagination-bottom vaadin-button {
        width: auto;
        height: auto;
        min-width: auto;
        padding: var(--lumo-space-xs) var(--lumo-space-s);
        font-size: var(--lumo-font-size-s);
    }
    
    .deck-pagination-top vaadin-button vaadin-icon,
    .deck-pagination-bottom vaadin-button vaadin-icon {
        margin-right: var(--lumo-space-xs);
    }
}

/* ==================== General Container Fixes ==================== */

/* Prevent horizontal scroll */
.container-md {
    max-width: 100%;
    padding-right: var(--lumo-space-m);
    padding-left: var(--lumo-space-m);
    box-sizing: border-box;
    overflow-x: hidden; /* Prevent any horizontal overflow */
}

/* Ensure toolbar respects container padding */
.decks-section {
    margin-right: 0;
    margin-left: 0;
    padding-right: 0;
    padding-left: 0;
}

/* Toolbar should match deck-card width exactly - merged with mobile toolbar styles */

@media (min-width: 768px) {
    .container-md {
        max-width: 800px;
    }
}

/* ==================== Typography Mobile ==================== */

/* Headings responsive - mobile-first sizing */

/* Applied globally to all heading elements for consistent typography */
h1 {
    font-size: var(--lumo-font-size-xl);
}

h2 {
    font-size: var(--lumo-font-size-l);
}

h3 {
    font-size: var(--lumo-font-size-m);
}

/* Desktop: larger heading sizes */

@media (min-width: 768px) {
    h1 {
        font-size: var(--lumo-font-size-xxxl);
    }
    
    h2 {
        font-size: var(--lumo-font-size-xxl);
    }
    
    h3 {
        font-size: var(--lumo-font-size-xl);
    }
}

/* ==================== iOS Safe Areas ==================== */

/* Note: app-header and app-footer classes are not currently used */

/* To enable iOS safe areas, add these classes to your header/footer components */

/* ==================== Utility Classes ==================== */

/* Mobile-only visibility (flex by default for Vaadin layouts) */
.mobile-only {
    display: flex;
}

.desktop-only {
    display: none;
}

@media (min-width: 768px) {
    .mobile-only {
        display: none;
    }
    
    .desktop-only {
        display: flex;
    }
}

/* Responsive flex direction */
.flex-mobile-column {
    flex-direction: column;
}

@media (min-width: 768px) {
    .flex-mobile-column {
        flex-direction: row;
    }
}


